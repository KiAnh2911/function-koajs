{"version":3,"file":"todoRespository.js","names":["_config","_interopRequireDefault","require","_prapareDocs","obj","__esModule","default","todoRef","db","collection","batch","getListTodo","sort","limit","queryTodos","orderBy","Number","todos","get","prapareDocs","docs","addTodo","data","todo","createAt","Date","completed","respon","add","id","updateTodos","ids","map","update","doc","updatedAt","commit","removeManyTodo","todoRemove","String","delete"],"sources":["../../src/database/todoRespository.js"],"sourcesContent":["import db from \"../firestore/config\";\nimport prapareDocs from \"../helpers/prapareDocs\";\n\nconst todoRef = db.collection(\"todos\");\nconst batch = db.batch();\n\nexport async function getListTodo(sort = \"ASC\", limit = 10) {\n  let queryTodos = todoRef;\n\n  if (sort) {\n    queryTodos = queryTodos.orderBy(\"createAt\", sort);\n  }\n  if (limit) {\n    queryTodos = queryTodos.limit(Number(limit));\n  }\n\n  const todos = await queryTodos.get();\n\n  return prapareDocs(todos.docs);\n}\n\nexport async function addTodo(data) {\n  const todo = {\n    createAt: new Date(),\n    ...data,\n    completed: false,\n  };\n\n  const respon = await todoRef.add(todo);\n\n  return { id: respon.id, ...todo };\n}\n\nexport async function updateTodos(ids = []) {\n  ids.map(async (id) => {\n    const update = todoRef.doc(id);\n    batch.update(update, { completed: true, updatedAt: new Date() });\n  });\n\n  return await batch.commit();\n}\n\nexport async function removeManyTodo(ids = []) {\n  const todoRemove = ids.map((id) => todoRef.doc(String(id)).delete());\n  batch.delete(todoRemove);\n\n  return await batch.commit();\n}\n"],"mappings":";;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAiD,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEjD,MAAMG,OAAO,GAAGC,eAAE,CAACC,UAAU,CAAC,OAAO,CAAC;AACtC,MAAMC,KAAK,GAAGF,eAAE,CAACE,KAAK,CAAC,CAAC;AAEjB,eAAeC,WAAWA,CAACC,IAAI,GAAG,KAAK,EAAEC,KAAK,GAAG,EAAE,EAAE;EAC1D,IAAIC,UAAU,GAAGP,OAAO;EAExB,IAAIK,IAAI,EAAE;IACRE,UAAU,GAAGA,UAAU,CAACC,OAAO,CAAC,UAAU,EAAEH,IAAI,CAAC;EACnD;EACA,IAAIC,KAAK,EAAE;IACTC,UAAU,GAAGA,UAAU,CAACD,KAAK,CAACG,MAAM,CAACH,KAAK,CAAC,CAAC;EAC9C;EAEA,MAAMI,KAAK,GAAG,MAAMH,UAAU,CAACI,GAAG,CAAC,CAAC;EAEpC,OAAO,IAAAC,oBAAW,EAACF,KAAK,CAACG,IAAI,CAAC;AAChC;AAEO,eAAeC,OAAOA,CAACC,IAAI,EAAE;EAClC,MAAMC,IAAI,GAAG;IACXC,QAAQ,EAAE,IAAIC,IAAI,CAAC,CAAC;IACpB,GAAGH,IAAI;IACPI,SAAS,EAAE;EACb,CAAC;EAED,MAAMC,MAAM,GAAG,MAAMpB,OAAO,CAACqB,GAAG,CAACL,IAAI,CAAC;EAEtC,OAAO;IAAEM,EAAE,EAAEF,MAAM,CAACE,EAAE;IAAE,GAAGN;EAAK,CAAC;AACnC;AAEO,eAAeO,WAAWA,CAACC,GAAG,GAAG,EAAE,EAAE;EAC1CA,GAAG,CAACC,GAAG,CAAC,MAAOH,EAAE,IAAK;IACpB,MAAMI,MAAM,GAAG1B,OAAO,CAAC2B,GAAG,CAACL,EAAE,CAAC;IAC9BnB,KAAK,CAACuB,MAAM,CAACA,MAAM,EAAE;MAAEP,SAAS,EAAE,IAAI;MAAES,SAAS,EAAE,IAAIV,IAAI,CAAC;IAAE,CAAC,CAAC;EAClE,CAAC,CAAC;EAEF,OAAO,MAAMf,KAAK,CAAC0B,MAAM,CAAC,CAAC;AAC7B;AAEO,eAAeC,cAAcA,CAACN,GAAG,GAAG,EAAE,EAAE;EAC7C,MAAMO,UAAU,GAAGP,GAAG,CAACC,GAAG,CAAEH,EAAE,IAAKtB,OAAO,CAAC2B,GAAG,CAACK,MAAM,CAACV,EAAE,CAAC,CAAC,CAACW,MAAM,CAAC,CAAC,CAAC;EACpE9B,KAAK,CAAC8B,MAAM,CAACF,UAAU,CAAC;EAExB,OAAO,MAAM5B,KAAK,CAAC0B,MAAM,CAAC,CAAC;AAC7B"}