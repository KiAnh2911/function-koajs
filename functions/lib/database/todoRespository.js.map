{"version":3,"file":"todoRespository.js","names":["_config","_interopRequireDefault","require","obj","__esModule","default","todoRef","db","collection","getListTodo","sort","limit","todos","orderBy","Number","get","docs","map","doc","id","data","getAdd","addTodo","createAt","Date","completed","todo","add","updateTodos","updates","todoDoc","update","updatedAt","Promise","all","removeManyTodo","ids","todoRemove","String","delete"],"sources":["../../src/database/todoRespository.js"],"sourcesContent":["import db from \"../firestore/config\";\nconst todoRef = db.collection(\"todos\");\n\nexport async function getListTodo(sort = \"ASC\", limit = 0) {\n  const todos = await todoRef\n    .orderBy(\"createAt\", sort)\n    .limit(Number(limit))\n    .get();\n\n  return todos.docs.map((doc) => {\n    return { id: doc.id, ...doc.data() };\n  });\n}\n\nexport async function getAdd(data) {\n  const addTodo = {\n    createAt: new Date(),\n    ...data,\n    completed: false,\n  };\n\n  const todo = await todoRef.add(addTodo);\n\n  return { id: todo.id, ...addTodo };\n}\n\nexport async function updateTodos(todos = []) {\n  const updates = todos.map(async (id) => {\n    const todoDoc = (await todoRef.doc(`${id}`).get()).data();\n\n    return todoRef.doc(`${id}`).update({\n      ...todo,\n      completed: !todoDoc.completed,\n      updatedAt: new Date(),\n    });\n  });\n\n  return await Promise.all(updates);\n}\n\nexport async function removeManyTodo(ids = []) {\n  const todoRemove = ids.map((id) => todoRef.doc(String(id)).delete());\n\n  return await Promise.all(todoRemove);\n}\n"],"mappings":";;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAqC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACrC,MAAMG,OAAO,GAAGC,eAAE,CAACC,UAAU,CAAC,OAAO,CAAC;AAE/B,eAAeC,WAAWA,CAACC,IAAI,GAAG,KAAK,EAAEC,KAAK,GAAG,CAAC,EAAE;EACzD,MAAMC,KAAK,GAAG,MAAMN,OAAO,CACxBO,OAAO,CAAC,UAAU,EAAEH,IAAI,CAAC,CACzBC,KAAK,CAACG,MAAM,CAACH,KAAK,CAAC,CAAC,CACpBI,GAAG,CAAC,CAAC;EAER,OAAOH,KAAK,CAACI,IAAI,CAACC,GAAG,CAAEC,GAAG,IAAK;IAC7B,OAAO;MAAEC,EAAE,EAAED,GAAG,CAACC,EAAE;MAAE,GAAGD,GAAG,CAACE,IAAI,CAAC;IAAE,CAAC;EACtC,CAAC,CAAC;AACJ;AAEO,eAAeC,MAAMA,CAACD,IAAI,EAAE;EACjC,MAAME,OAAO,GAAG;IACdC,QAAQ,EAAE,IAAIC,IAAI,CAAC,CAAC;IACpB,GAAGJ,IAAI;IACPK,SAAS,EAAE;EACb,CAAC;EAED,MAAMC,IAAI,GAAG,MAAMpB,OAAO,CAACqB,GAAG,CAACL,OAAO,CAAC;EAEvC,OAAO;IAAEH,EAAE,EAAEO,IAAI,CAACP,EAAE;IAAE,GAAGG;EAAQ,CAAC;AACpC;AAEO,eAAeM,WAAWA,CAAChB,KAAK,GAAG,EAAE,EAAE;EAC5C,MAAMiB,OAAO,GAAGjB,KAAK,CAACK,GAAG,CAAC,MAAOE,EAAE,IAAK;IACtC,MAAMW,OAAO,GAAG,CAAC,MAAMxB,OAAO,CAACY,GAAG,CAAE,GAAEC,EAAG,EAAC,CAAC,CAACJ,GAAG,CAAC,CAAC,EAAEK,IAAI,CAAC,CAAC;IAEzD,OAAOd,OAAO,CAACY,GAAG,CAAE,GAAEC,EAAG,EAAC,CAAC,CAACY,MAAM,CAAC;MACjC,GAAGL,IAAI;MACPD,SAAS,EAAE,CAACK,OAAO,CAACL,SAAS;MAC7BO,SAAS,EAAE,IAAIR,IAAI,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,OAAO,MAAMS,OAAO,CAACC,GAAG,CAACL,OAAO,CAAC;AACnC;AAEO,eAAeM,cAAcA,CAACC,GAAG,GAAG,EAAE,EAAE;EAC7C,MAAMC,UAAU,GAAGD,GAAG,CAACnB,GAAG,CAAEE,EAAE,IAAKb,OAAO,CAACY,GAAG,CAACoB,MAAM,CAACnB,EAAE,CAAC,CAAC,CAACoB,MAAM,CAAC,CAAC,CAAC;EAEpE,OAAO,MAAMN,OAAO,CAACC,GAAG,CAACG,UAAU,CAAC;AACtC"}